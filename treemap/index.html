<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>KOSPI/KOSDAQ Map Demo</title>
  <link rel="stylesheet" href="./style.css">
  <script>
    // 전역 변수 초기화
    window.dataType = 'kospi'; // 기본값 설정

    // 스크립트를 로드하면서 dataType 설정
    function loadScript(dataType) {
        window.dataType = dataType;  // 전역 변수에 버튼에 따른 값 설정
        const script = document.createElement('script');
        script.src = './index.js';
        document.body.appendChild(script);
    }

    // JSON 파일 리스트 불러오기
    async function loadJsonList() {
      try {
        const response = await fetch('file.json');
        const data = await response.json();
        const jsonListContainer = document.getElementById('json-list');
        data.forEach(fileName => {
          const button = document.createElement('button');
          button.textContent = fileName;
          button.onclick = () => loadJsonFile(fileName);
          jsonListContainer.appendChild(button);
        });
      } catch (error) {
        console.error('Error loading JSON list:', error);
      }
    }

    // JSON 파일 로드 함수 (예시)
    function loadJsonFile(fileName) {
      console.log(`Loading JSON file: ${fileName}`);
      // 파일을 불러오는 추가 로직을 여기에 추가하세요.
    }

    // 다크 모드 토글 함수
    function toggleDarkMode(checkbox) {
        const body = document.body;
        if (checkbox.checked) {
            body.classList.add('dark-mode'); // 다크 모드 활성화
        } else {
            body.classList.remove('dark-mode'); // 다크 모드 비활성화
        }
    }

    // 페이지 로드 시 JSON 파일 리스트 불러오기
    window.onload = loadJsonList;
  </script>
</head>
<body>
  <div class="container">
    <div class="json-list" id="json-list"></div>
    
    <div>
      <div class="button-container">
        <button onclick="loadScript('kospi')">KOSPI</button>
        <button onclick="loadScript('kosdaq')">KOSDAQ</button>
        <label class="switch">
          <input type="checkbox" onchange="toggleDarkMode(this)">
          <span class="slider"></span>
        </label>
      </div>

      <div id="chart-container"></div>
    </div>
  </div>
  
  <script src="https://fastly.jsdelivr.net/npm/jquery@3.7.1/dist/jquery.min.js"></script>
  <script src="https://fastly.jsdelivr.net/npm/echarts@5.5.1/dist/echarts.min.js"></script>
</body>
</html>
